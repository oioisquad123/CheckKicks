# Task ID: 24.5

**Title:** Implement app-wide color scheme system per PRD design

**Status:** pending

**Dependencies:** 5

**Priority:** low

**Phase:** 1C - User Experience Features

**Description:** Create centralized color system matching PRD specifications and apply consistently throughout the app with dark mode support

**Current State:**
- ResultsView.swift has color implementation (Task 12)
- Colors defined inline: #22C55E (green), #EF4444 (red), #F59E0B (amber)
- No app-wide color system
- Unclear if dark mode is supported globally

**PRD Design Specifications (Lines 159-164):**
- **Primary:** Deep navy #1E3A5F (or black for premium feel)
- **Authentic:** Green #22C55E
- **Fake:** Red #EF4444
- **Inconclusive:** Amber #F59E0B
- **Typography:** SF Pro (system default)
- **Theme:** Modern, trustworthy, tech-forward

**Details:**

**1. Create Color Extension**

Create `Utilities/Color+Theme.swift`:

```swift
import SwiftUI

extension Color {
    // MARK: - Brand Colors

    /// Primary brand color - Deep navy or black for premium feel
    static let appPrimary = Color(hex: "1E3A5F")

    /// Alternative primary for dark mode
    static let appPrimaryDark = Color(hex: "0F1E2F")

    /// Accent color for positive actions
    static let appAccent = Color(hex: "22C55E")

    // MARK: - Verdict Colors

    /// Authentic verdict color - Green
    static let authentic = Color(hex: "22C55E")

    /// Fake verdict color - Red
    static let fake = Color(hex: "EF4444")

    /// Inconclusive verdict color - Amber
    static let inconclusive = Color(hex: "F59E0B")

    // MARK: - UI Colors

    /// Background color - adapts to light/dark mode
    static let appBackground = Color("AppBackground")

    /// Card background color
    static let cardBackground = Color("CardBackground")

    /// Text primary color
    static let textPrimary = Color("TextPrimary")

    /// Text secondary color (less prominent)
    static let textSecondary = Color("TextSecondary")

    /// Divider/border color
    static let divider = Color("Divider")

    // MARK: - Helper Methods

    /// Initialize color from hex string
    init(hex: String) {
        let hex = hex.trimmingCharacters(in: CharacterSet.alphanumerics.inverted)
        var int: UInt64 = 0
        Scanner(string: hex).scanHexInt64(&int)
        let a, r, g, b: UInt64
        switch hex.count {
        case 3: // RGB (12-bit)
            (a, r, g, b) = (255, (int >> 8) * 17, (int >> 4 & 0xF) * 17, (int & 0xF) * 17)
        case 6: // RGB (24-bit)
            (a, r, g, b) = (255, int >> 16, int >> 8 & 0xFF, int & 0xFF)
        case 8: // ARGB (32-bit)
            (a, r, g, b) = (int >> 24, int >> 16 & 0xFF, int >> 8 & 0xFF, int & 0xFF)
        default:
            (a, r, g, b) = (255, 0, 0, 0)
        }
        self.init(
            .sRGB,
            red: Double(r) / 255,
            green: Double(g) / 255,
            blue:  Double(b) / 255,
            opacity: Double(a) / 255
        )
    }
}
```

**2. Create Color Assets for Adaptive Colors**

In `Assets.xcassets`, create Color Sets:

**AppBackground:**
- Light: #FFFFFF (white)
- Dark: #000000 (black)

**CardBackground:**
- Light: #F5F5F5 (light gray)
- Dark: #1C1C1E (dark gray)

**TextPrimary:**
- Light: #000000 (black)
- Dark: #FFFFFF (white)

**TextSecondary:**
- Light: #6B7280 (gray)
- Dark: #9CA3AF (light gray)

**Divider:**
- Light: #E5E7EB (light gray)
- Dark: #374151 (dark gray)

**Steps to Create Color Set:**
1. Right-click Assets.xcassets → New Color Set
2. Name it (e.g., "AppBackground")
3. Set "Appearances" to "Any, Dark"
4. Set hex values for each appearance

**3. Update Existing Views**

**ResultsView.swift:**
Replace inline hex colors:
```swift
// Before:
.foregroundColor(Color(hex: "22C55E"))

// After:
.foregroundColor(.authentic)
```

**Update all verdict colors:**
- `Color(hex: "22C55E")` → `Color.authentic`
- `Color(hex: "EF4444")` → `Color.fake`
- `Color(hex: "F59E0B")` → `Color.inconclusive`

**4. Apply to All Views**

**Authentication/SignInView:**
- Background: `.appBackground`
- Buttons: `.appPrimary` or `.appAccent`
- Text: `.textPrimary`

**Photo Capture Views:**
- Background: `.appBackground`
- Cards: `.cardBackground`
- Borders: `.divider`

**Home/Navigation:**
- Navigation bar background: `.appPrimary`
- Tab bar: `.appBackground`
- Selected tab: `.appAccent`

**Paywall (future Task 16):**
- Premium tier highlight: `.authentic` (green)
- Call-to-action button: `.appAccent`

**5. Create ViewModifier for Consistent Styling**

Create `Utilities/ViewModifiers.swift`:

```swift
import SwiftUI

// MARK: - Card Style
struct CardStyle: ViewModifier {
    func body(content: Content) -> some View {
        content
            .background(Color.cardBackground)
            .cornerRadius(12)
            .shadow(color: Color.black.opacity(0.1), radius: 4, x: 0, y: 2)
    }
}

extension View {
    func cardStyle() -> some View {
        modifier(CardStyle())
    }
}

// MARK: - Primary Button Style
struct PrimaryButtonStyle: ButtonStyle {
    func makeBody(configuration: Configuration) -> some View {
        configuration.label
            .font(.headline)
            .foregroundColor(.white)
            .padding()
            .frame(maxWidth: .infinity)
            .background(Color.appAccent)
            .cornerRadius(12)
            .scaleEffect(configuration.isPressed ? 0.95 : 1.0)
    }
}

extension ButtonStyle where Self == PrimaryButtonStyle {
    static var primary: PrimaryButtonStyle { PrimaryButtonStyle() }
}
```

**Usage:**
```swift
VStack {
    // Card content
}
.cardStyle()

Button("Continue") { }
    .buttonStyle(.primary)
```

**6. Document Color System**

Create `Design/COLOR_SYSTEM.md`:

```markdown
# Auntentic Color System

## Brand Colors
- Primary: #1E3A5F (Deep Navy)
- Accent: #22C55E (Green)

## Verdict Colors
- Authentic: #22C55E (Green)
- Fake: #EF4444 (Red)
- Inconclusive: #F59E0B (Amber)

## Usage
\`\`\`swift
.foregroundColor(.appPrimary)
.background(Color.authentic)
\`\`\`

## Dark Mode
All colors adapt automatically using Color Assets.
```

**Test Strategy:**

**Visual Consistency Check:**
- [ ] All views use `Color.appPrimary` instead of inline hex
- [ ] Verdict colors consistent across all screens
- [ ] No hard-coded color values (all use Color extension)
- [ ] Navigation/tab bars use brand colors

**Dark Mode Testing:**
- [ ] Enable dark mode on device (Settings → Display)
- [ ] Navigate through entire app
- [ ] Verify all backgrounds adapt (white → black)
- [ ] Verify all text is readable
- [ ] Check verdict colors maintain visibility
- [ ] Cards have proper contrast

**Accessibility Testing:**
- [ ] Run Accessibility Inspector
- [ ] Check color contrast ratios (WCAG AA: 4.5:1 for text)
- [ ] Test with Color Blindness filters (protanopia, deuteranopia)
- [ ] Verdict uses icon + text, not just color

**Design Review:**
- [ ] Matches PRD color specifications
- [ ] Consistent with brand identity
- [ ] Professional appearance
- [ ] Distinct from competitors

**Screens to Update:**
- [ ] SignInView
- [ ] HomeView
- [ ] PhotoCaptureView
- [ ] PhotoReviewView
- [ ] ResultsView (already has colors, just refactor)
- [ ] HistoryView (Task 23)
- [ ] OnboardingView (Task 24)
- [ ] PaywallView (Task 16)
- [ ] SettingsView (Task 26)

**Completion Criteria:**
- [ ] `Color+Theme.swift` extension created
- [ ] All brand colors defined (primary, accent, verdicts)
- [ ] Color Assets created for adaptive colors
- [ ] Dark mode support implemented
- [ ] All inline hex colors replaced with named colors
- [ ] ViewModifiers created for consistency
- [ ] Color system documented
- [ ] Tested in light and dark mode
- [ ] Accessibility verified (color contrast)
- [ ] No hard-coded colors remain in codebase

**Refactoring Scope:**
This task primarily affects:
- `ResultsView.swift` (refactor existing colors)
- All other views (apply color system)
- New utility files (Color extension, ViewModifiers)

**Time Estimate:** 2-3 hours

**Notes:**
- Low priority but high value for brand consistency
- Can be done in parallel with other tasks
- Makes future UI changes much easier
- Improves dark mode support automatically
